"use strict";(self.webpackChunksparkworks_console=self.webpackChunksparkworks_console||[]).push([[404],{95404:function(G,U,s){s.r(U),s.d(U,{amplify_amazon_button:function(){return L},amplify_auth0_button:function(){return j},amplify_facebook_button:function(){return z},amplify_google_button:function(){return R},amplify_oauth_button:function(){return Z}});var C=s(8239),y=s(75134),E=s(47289),M=s(88774),I=s.n(M),u=s(65513),O=s(45013),b=s(53799),D=s(82073),i=s(33542),S=s(30031),A=s(84665),T=s(36755),W=new O.k("amplify-amazon-button"),L=function(){function r(a){var e=this;(0,y.Z)(this,r),(0,u.r)(this,a),this.handleAuthStateChange=T.d,this.federatedSignIn=function(n){var t=n.access_token,g=n.expires_in;if(t){if(!i.g||"function"!=typeof i.g.federatedSignIn||"function"!=typeof i.g.currentAuthenticatedUser)throw new Error(A.N);var h=1e3*g+(new Date).getTime();window.amazon.Login.retrieveProfile(function(){var v=(0,C.Z)(I().mark(function c(d){var p;return I().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(d.success){l.next=2;break}return l.abrupt("return",W.debug("Get user Info failed"));case 2:return p={name:d.profile.Name,email:d.profile.PrimaryEmail},l.next=5,i.g.federatedSignIn("amazon",{token:t,expires_at:h},p);case 5:return l.next=7,i.g.currentAuthenticatedUser();case 7:e.handleAuthStateChange(D.A.SignedIn,l.sent);case 9:case"end":return l.stop()}},c)}));return function(c){return v.apply(this,arguments)}}())}}}return(0,E.Z)(r,[{key:"signInWithAmazon",value:function(e){var n=this;e.preventDefault(),window.amazon.Login.setClientId(this.clientId),window.amazon.Login.authorize({scope:"profile"},function(t){if(t.error)return W.debug("Failed to login with amazon: "+t.error);try{window.localStorage.setItem(A.h,JSON.stringify({provider:"amazon"}))}catch(g){W.debug("Failed to cache auth source into localStorage",g)}n.federatedSignIn(t)})}},{key:"render",value:function(){var e=this;return(0,u.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithAmazon(t)},provider:"amazon"},(0,u.h)("script",{src:"https://assets.loginwithamazon.com/sdk/na/login1.js"}),b.o.get(S.T.SIGN_IN_WITH_AMAZON))}}]),r}(),k=new O.k("amplify-auth0-button"),j=function(){function r(a){var e=this;(0,y.Z)(this,r),(0,u.r)(this,a),this.handleAuthStateChange=T.d,this.handleLoad=function(){var t=i.g.configure().oauth,_=e.config,h=void 0===_?(void 0===t?{}:t).auth0:_;h?(k.debug("auth0 configuration",h),e._auth0||(e._auth0=new window.auth0.WebAuth(h)),e._auth0.parseHash(function(v,c){if(v)k.debug("Failed to parse the url for Auth0",v);else if(c){var d={provider:"auth0",opts:{returnTo:h.returnTo,clientID:h.clientID,federated:h.federated}};try{localStorage.setItem(A.h,JSON.stringify(d))}catch(p){k.debug("Failed to cache auth source into localStorage",p)}e._auth0.client.userInfo(c.accessToken,function(){var p=(0,C.Z)(I().mark(function o(f,l){var m,P;return I().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return m=void 0,P=void 0,f?k.debug("Failed to get the user info",f):(m=l.name,P=l.email),w.next=5,i.g.federatedSignIn(h.domain,{token:c.idToken,expires_at:1e3*c.expiresIn+(new Date).getTime()},{name:m,email:P});case 5:return w.next=7,i.g.currentAuthenticatedUser();case 7:e.handleAuthStateChange(D.A.SignedIn,w.sent);case 9:case"end":return w.stop()}},o)}));return function(o,f){return p.apply(this,arguments)}}())}else k.debug("Auth0 found no authResult in hash")})):k.debug("Auth0 is not configured")}}return(0,E.Z)(r,[{key:"signInWithAuth0",value:function(e){if(e.preventDefault(),!this._auth0)throw new Error("the auth0 client is not configured");this._auth0.authorize()}},{key:"render",value:function(){var e=this;return(0,u.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithAuth0(t)},provider:"auth0"},(0,u.h)("script",{onLoad:this.handleLoad,src:"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"}),b.o.get(S.T.SIGN_IN_WITH_AUTH0))}}]),r}(),N=new O.k("amplify-facebook-button"),z=function(){function r(a){var e=this;(0,y.Z)(this,r),(0,u.r)(this,a),this.handleAuthStateChange=T.d,this.federatedSignIn=function(n){var t=n.accessToken,g=n.expiresIn;if(t){if(!i.g||"function"!=typeof i.g.federatedSignIn||"function"!=typeof i.g.currentAuthenticatedUser)throw new Error(A.N);var h=1e3*g+(new Date).getTime();window.FB.api("/me",{fields:"name,email"},function(){var c=(0,C.Z)(I().mark(function d(p){var o;return I().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return o={name:p.name,email:p.email},m.next=3,i.g.federatedSignIn("facebook",{token:t,expires_at:h},o);case 3:return m.next=5,i.g.currentAuthenticatedUser();case 5:e.handleAuthStateChange(D.A.SignedIn,m.sent);case 7:case"end":return m.stop()}},d)}));return function(d){return c.apply(this,arguments)}}())}},this.getLoginStatus=function(){window.FB.getLoginStatus(function(n){try{window.localStorage.setItem(A.h,JSON.stringify({provider:"facebook"}))}catch(t){N.debug("Failed to cache auth source into localStorage",t)}if("connected"===n.status)return e.federatedSignIn(n.authResponse);e.login()})},this.login=function(){window.FB.login(function(t){t&&t.authResponse&&e.federatedSignIn(t.authResponse)},{scope:"public_profile,email"})}}return(0,E.Z)(r,[{key:"signInWithFacebook",value:function(e){e.preventDefault(),window.FB.init({appId:this.appId,cookie:!0,xfbml:!1,version:"v5.0"}),this.getLoginStatus()}},{key:"render",value:function(){var e=this;return(0,u.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithFacebook(t)},provider:"facebook"},(0,u.h)("script",{async:!0,defer:!0,src:"https://connect.facebook.net/en_US/sdk.js"}),b.o.get(S.T.SIGN_IN_WITH_FACEBOOK))}}]),r}(),F=new O.k("amplify-google-button"),R=function(){function r(a){var e=this;(0,y.Z)(this,r),(0,u.r)(this,a),this.handleAuthStateChange=T.d,this.handleError=function(n){console.error(n)},this.handleLoad=function(){window.gapi.load("auth2")},this.handleUser=function(){var n=(0,C.Z)(I().mark(function t(g){var _,h,v,c,d;return I().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i.g&&"function"==typeof i.g.federatedSignIn&&"function"==typeof i.g.currentAuthenticatedUser){o.next=2;break}throw new Error(A.N);case 2:try{window.localStorage.setItem(A.h,JSON.stringify({provider:"google"}))}catch(f){F.debug("Failed to cache auth source into localStorage",f)}return _=g.getAuthResponse(),h=_.id_token,v=_.expires_at,c=g.getBasicProfile(),o.next=7,i.g.federatedSignIn("google",{token:h,expires_at:v},{email:c.getEmail(),name:c.getName(),picture:c.getImageUrl()});case 7:return o.next=9,i.g.currentAuthenticatedUser();case 9:d=o.sent;try{e.handleAuthStateChange(D.A.SignedIn,d)}catch(f){e.handleError(f)}case 11:case"end":return o.stop()}},t)}));return function(t){return n.apply(this,arguments)}}()}return(0,E.Z)(r,[{key:"getAuthInstance",value:function(){return window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance()||window.gapi.auth2.init({client_id:this.clientId,cookiepolicy:"single_host_origin",scope:"profile email openid"}):null}},{key:"signInWithGoogle",value:function(e){e.preventDefault(),this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError)}},{key:"render",value:function(){var e=this;return(0,u.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithGoogle(t)},provider:"google"},(0,u.h)("script",{onLoad:this.handleLoad,src:"https://apis.google.com/js/api:client.js"}),b.o.get(S.T.SIGN_IN_WITH_GOOGLE))}}]),r}(),Z=function(){function r(a){(0,y.Z)(this,r),(0,u.r)(this,a),this.config={}}return(0,E.Z)(r,[{key:"signInWithOAuth",value:function(e){e.preventDefault(),i.g.federatedSignIn()}},{key:"render",value:function(){var e=this;return(0,u.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithOAuth(t)},provider:"oauth"},this.config.label||b.o.get(S.T.SIGN_IN_WITH_AWS))}}]),r}()}}]);